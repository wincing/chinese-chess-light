{"version":3,"sources":["assets\\scripts\\InitColor.js"],"names":["cc","Class","Component","initButton","levels","node","getChildren","loader","loadRes","SpriteFrame","err","spriteFrame","i","key","name","sys","localStorage","getItem","getChildByName","color","getComponent","Button","normalSprite","initTitle","index","parent","getComponents","initChapter","caps","Array","flag","j","find","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * 改变过关关卡颜色\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    /**\r\n     * 初始按钮颜色\r\n     */\r\n    initButton() {\r\n        var levels = this.node.getChildren();\r\n \r\n        cc.loader.loadRes(\"button/stage_passed\", cc.SpriteFrame, function (err, spriteFrame) {\r\n            for(var i = 0; i < 9; i++) {\r\n\r\n                var key = levels[i].name;\r\n                if(cc.sys.localStorage.getItem(key)) {\r\n                    // 更换字体颜色\r\n                    levels[i].getChildByName('Label').color = new cc.color(255, 217, 102, 255);\r\n                    // 更换按钮图片\r\n                    levels[i].getComponent(cc.Button).normalSprite = spriteFrame;\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n\r\n    /**\r\n     * 初始标题颜色\r\n     */\r\n    initTitle() {\r\n        var index = this.node.parent.getComponents(cc.Component)[1].index;\r\n        if(cc.sys.localStorage.getItem('Level' + index)) {\r\n            // 更换标题颜色\r\n            this.node.color = new cc.color(255, 217, 102, 255);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 初始化章节颜色, 用与场景ChoiceCap\r\n     */\r\n    initChapter() {\r\n        // 获取全部通关章节\r\n        var caps = new Array();\r\n        for(var i = 1; i <= 5; i++) {\r\n            var flag = true;\r\n            for(var j = (i-1) * 9 + 1; j <= 9 * i; j++) {\r\n                if(!cc.sys.localStorage.getItem('Level' + j)) {\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            }\r\n  \r\n            if(flag) {\r\n                var name = 'Canvas/BackGround/Chapter' + i;\r\n                caps[i] = cc.find(name);\r\n            }\r\n        }\r\n\r\n        // 更改章节样式\r\n        cc.loader.loadRes(\"button/chap_passed\", cc.SpriteFrame, function (err, spriteFrame) {\r\n            for(var i = 1; i <= 5; i++) {\r\n                if(caps[i]) {\r\n                    // 更换字体颜色\r\n                    caps[i].getChildByName('Label').color = new cc.color(255, 217, 102, 255);\r\n                    // 更换按钮图片\r\n                    caps[i].getComponent(cc.Button).normalSprite = spriteFrame;\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    start() {\r\n        if(this.node.name == 'Levels') this.initButton();\r\n        else if(this.node.name == 'Title') this.initTitle();\r\n        else this.initChapter();\r\n    },\r\n});\r\n"]}